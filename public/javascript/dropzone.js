"use strict";var _createClass=function(){function a(e,d){for(var c=0;c<d.length;c++){var b=d[c];b.enumerable=b.enumerable||false;b.configurable=true;if("value" in b){b.writable=true}Object.defineProperty(e,b.key,b)}}return function(b,c,d){if(c){a(b.prototype,c)}if(d){a(b,d)}return b}}();function _possibleConstructorReturn(b,a){if(!b){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return a&&(typeof a==="object"||typeof a==="function")?a:b}function _inherits(a,b){if(typeof b!=="function"&&b!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof b)}a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:false,writable:true,configurable:true}});if(b){Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b}}function _classCallCheck(b,a){if(!(b instanceof a)){throw new TypeError("Cannot call a class as a function")}}var Emitter=function(){function b(){_classCallCheck(this,b)}_createClass(b,[{key:"on",value:function d(e,f){this._callbacks=this._callbacks||{};if(!this._callbacks[e]){this._callbacks[e]=[]}this._callbacks[e].push(f);return this}},{key:"emit",value:function a(n){this._callbacks=this._callbacks||{};var m=this._callbacks[n];if(m){for(var i=arguments.length,k=Array(i>1?i-1:0),h=1;h<i;h++){k[h-1]=arguments[h]}for(var g=m,f=true,e=0,g=f?g:g[Symbol.iterator]();;){var j;if(f){if(e>=g.length){break}j=g[e++]}else{e=g.next();if(e.done){break}j=e.value}var l=j;l.apply(this,k)}}return this}},{key:"off",value:function c(g,h){if(!this._callbacks||arguments.length===0){this._callbacks={};return this}var f=this._callbacks[g];if(!f){return this}if(arguments.length===1){delete this._callbacks[g];return this}for(var j=0;j<f.length;j++){var e=f[j];if(e===h){f.splice(j,1);break}}return this}}]);return b}();var Dropzone=function(d){_inherits(A,d);_createClass(A,null,[{key:"initClass",value:function R(){this.prototype.Emitter=Emitter;this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"];this.prototype.defaultOptions={url:null,method:"post",withCredentials:false,timeout:30000,parallelUploads:2,uploadMultiple:false,chunking:false,forceChunking:false,chunkSize:2000000,parallelChunkUploads:false,retryChunks:false,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:0.8,resizeMethod:"contain",filesizeBase:1000,maxFiles:null,headers:null,clickable:true,ignoreHiddenFiles:true,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:true,autoQueue:true,addRemoveLinks:false,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:false,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function az(){},params:function aC(aT,aU,aS){if(aS){return{dzuuid:aS.file.upload.uuid,dzchunkindex:aS.index,dztotalfilesize:aS.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:aS.file.upload.totalChunkCount,dzchunkbyteoffset:aS.index*this.options.chunkSize}}},accept:function ah(aT,aS){return aS()},chunksUploaded:function am(aT,aS){aS()},fallback:function ay(){var aX=void 0;this.element.className=this.element.className+" dz-browser-not-supported";for(var aU=this.element.getElementsByTagName("div"),aT=true,aS=0,aU=aT?aU:aU[Symbol.iterator]();;){var aV;if(aT){if(aS>=aU.length){break}aV=aU[aS++]}else{aS=aU.next();if(aS.done){break}aV=aS.value}var aW=aV;if(/(^| )dz-message($| )/.test(aW.className)){aX=aW;aW.className="dz-message";break}}if(!aX){aX=A.createElement('<div class="dz-message"><span></span></div>');this.element.appendChild(aX)}var aY=aX.getElementsByTagName("span")[0];if(aY){if(aY.textContent!=null){aY.textContent=this.options.dictFallbackMessage}else{if(aY.innerText!=null){aY.innerText=this.options.dictFallbackMessage}}}return this.element.appendChild(this.getFallbackForm())},resize:function aJ(aS,aY,aT,aV){var aU={srcX:0,srcY:0,srcWidth:aS.width,srcHeight:aS.height};var aW=aS.width/aS.height;if(aY==null&&aT==null){aY=aU.srcWidth;aT=aU.srcHeight}else{if(aY==null){aY=aT*aW}else{if(aT==null){aT=aY/aW}}}aY=Math.min(aY,aU.srcWidth);aT=Math.min(aT,aU.srcHeight);var aX=aY/aT;if(aU.srcWidth>aY||aU.srcHeight>aT){if(aV==="crop"){if(aW>aX){aU.srcHeight=aS.height;aU.srcWidth=aU.srcHeight*aX}else{aU.srcWidth=aS.width;aU.srcHeight=aU.srcWidth/aX}}else{if(aV==="contain"){if(aW>aX){aT=aY/aW}else{aY=aT*aW}}else{throw new Error("Unknown resizeMethod '"+aV+"'")}}}aU.srcX=(aS.width-aU.srcWidth)/2;aU.srcY=(aS.height-aU.srcHeight)/2;aU.trgWidth=aY;aU.trgHeight=aT;return aU},transformFile:function aQ(aT,aS){if((this.options.resizeWidth||this.options.resizeHeight)&&aT.type.match(/image.*/)){return this.resizeImage(aT,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,aS)}else{return aS(aT)}},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function av(aS){return this.element.classList.remove("dz-drag-hover")},dragstart:function au(aS){},dragend:function ap(aS){return this.element.classList.remove("dz-drag-hover")},dragenter:function aq(aS){return this.element.classList.add("dz-drag-hover")},dragover:function at(aS){return this.element.classList.add("dz-drag-hover")},dragleave:function ar(aS){return this.element.classList.remove("dz-drag-hover")},paste:function aD(aS){},reset:function aI(){return this.element.classList.remove("dz-started")},addedfile:function ai(a4){var a3=this;if(this.element===this.previewsContainer){this.element.classList.add("dz-started")}if(this.previewsContainer){a4.previewElement=A.createElement(this.options.previewTemplate.trim());a4.previewTemplate=a4.previewElement;this.previewsContainer.appendChild(a4.previewElement);for(var aY=a4.previewElement.querySelectorAll("[data-dz-name]"),aV=true,aS=0,aY=aV?aY:aY[Symbol.iterator]();;){var a1;if(aV){if(aS>=aY.length){break}a1=aY[aS++]}else{aS=aY.next();if(aS.done){break}a1=aS.value}var a5=a1;a5.textContent=a4.name}for(var aZ=a4.previewElement.querySelectorAll("[data-dz-size]"),aW=true,aT=0,aZ=aW?aZ:aZ[Symbol.iterator]();;){if(aW){if(aT>=aZ.length){break}a5=aZ[aT++]}else{aT=aZ.next();if(aT.done){break}a5=aT.value}a5.innerHTML=this.filesize(a4.size)}if(this.options.addRemoveLinks){a4._removeLink=A.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>");a4.previewElement.appendChild(a4._removeLink)}var a6=function a6(a8){a8.preventDefault();a8.stopPropagation();if(a4.status===A.UPLOADING){return A.confirm(a3.options.dictCancelUploadConfirmation,function(){return a3.removeFile(a4)})}else{if(a3.options.dictRemoveFileConfirmation){return A.confirm(a3.options.dictRemoveFileConfirmation,function(){return a3.removeFile(a4)})}else{return a3.removeFile(a4)}}};for(var a0=a4.previewElement.querySelectorAll("[data-dz-remove]"),aX=true,aU=0,a0=aX?a0:a0[Symbol.iterator]();;){var a2;if(aX){if(aU>=a0.length){break}a2=a0[aU++]}else{aU=a0.next();if(aU.done){break}a2=aU.value}var a7=a2;a7.addEventListener("click",a6)}}},removedfile:function aH(aS){if(aS.previewElement!=null&&aS.previewElement.parentNode!=null){aS.previewElement.parentNode.removeChild(aS.previewElement)}return this._updateMaxFilesReachedClass()},thumbnail:function aO(aX,aW){if(aX.previewElement){aX.previewElement.classList.remove("dz-file-preview");for(var aU=aX.previewElement.querySelectorAll("[data-dz-thumbnail]"),aT=true,aS=0,aU=aT?aU:aU[Symbol.iterator]();;){var aV;if(aT){if(aS>=aU.length){break}aV=aU[aS++]}else{aS=aU.next();if(aS.done){break}aV=aS.value}var aY=aV;aY.alt=aX.name;aY.src=aW}return setTimeout(function(){return aX.previewElement.classList.add("dz-image-preview")},1)}},error:function aw(aW,aX){if(aW.previewElement){aW.previewElement.classList.add("dz-error");if(typeof aX!=="String"&&aX.error){aX=aX.error}for(var aU=aW.previewElement.querySelectorAll("[data-dz-errormessage]"),aT=true,aS=0,aU=aT?aU:aU[Symbol.iterator]();;){var aV;if(aT){if(aS>=aU.length){break}aV=aU[aS++]}else{aS=aU.next();if(aS.done){break}aV=aS.value}var aY=aV;aY.textContent=aX}}},errormultiple:function ax(){},processing:function aE(aS){if(aS.previewElement){aS.previewElement.classList.add("dz-processing");if(aS._removeLink){return aS._removeLink.textContent=this.options.dictCancelUpload}}},processingmultiple:function aF(){},uploadprogress:function aR(aX,aZ,aW){if(aX.previewElement){for(var aU=aX.previewElement.querySelectorAll("[data-dz-uploadprogress]"),aT=true,aS=0,aU=aT?aU:aU[Symbol.iterator]();;){var aV;if(aT){if(aS>=aU.length){break}aV=aU[aS++]}else{aS=aU.next();if(aS.done){break}aV=aS.value}var aY=aV;aY.nodeName==="PROGRESS"?aY.value=aZ:aY.style.width=aZ+"%"}}},totaluploadprogress:function aP(){},sending:function aK(){},sendingmultiple:function aL(){},success:function aM(aS){if(aS.previewElement){return aS.previewElement.classList.add("dz-success")}},successmultiple:function aN(){},canceled:function ak(aS){return this.emit("error",aS,this.options.dictUploadCanceled)},canceledmultiple:function al(){},complete:function an(aS){if(aS._removeLink){aS._removeLink.textContent=this.options.dictRemoveFile}if(aS.previewElement){return aS.previewElement.classList.add("dz-complete")}},completemultiple:function ao(){},maxfilesexceeded:function aA(){},maxfilesreached:function aB(){},queuecomplete:function aG(){},addedfiles:function aj(){}};this.prototype._thumbnailQueue=[];this.prototype._processingThumbnail=false}},{key:"extend",value:function E(aq){for(var al=arguments.length,ap=Array(al>1?al-1:0),ak=1;ak<al;ak++){ap[ak-1]=arguments[ak]}for(var aj=ap,ai=true,ah=0,aj=ai?aj:aj[Symbol.iterator]();;){var am;if(ai){if(ah>=aj.length){break}am=aj[ah++]}else{ah=aj.next();if(ah.done){break}am=ah.value}var ao=am;for(var an in ao){var ar=ao[an];aq[an]=ar}}return aq}}]);function A(aj,an){_classCallCheck(this,A);var ai=_possibleConstructorReturn(this,(A.__proto__||Object.getPrototypeOf(A)).call(this));var al=void 0,am=void 0;ai.element=aj;ai.version=A.version;ai.defaultOptions.previewTemplate=ai.defaultOptions.previewTemplate.replace(/\n*/g,"");ai.clickableElements=[];ai.listeners=[];ai.files=[];if(typeof ai.element==="string"){ai.element=document.querySelector(ai.element)}if(!ai.element||ai.element.nodeType==null){throw new Error("Invalid dropzone element.")}if(ai.element.dropzone){throw new Error("Dropzone already attached.")}A.instances.push(ai);ai.element.dropzone=ai;var ak=(am=A.optionsForElement(ai.element))!=null?am:{};ai.options=A.extend({},ai.defaultOptions,ak,an!=null?an:{});if(ai.options.forceFallback||!A.isBrowserSupported()){var ah;return ah=ai.options.fallback.call(ai),_possibleConstructorReturn(ai,ah)}if(ai.options.url==null){ai.options.url=ai.element.getAttribute("action")}if(!ai.options.url){throw new Error("No URL provided.")}if(ai.options.acceptedFiles&&ai.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.")}if(ai.options.uploadMultiple&&ai.options.chunking){throw new Error("You cannot set both: uploadMultiple and chunking.")}if(ai.options.acceptedMimeTypes){ai.options.acceptedFiles=ai.options.acceptedMimeTypes;delete ai.options.acceptedMimeTypes}if(ai.options.renameFilename!=null){ai.options.renameFile=function(ao){return ai.options.renameFilename.call(ai,ao.name,ao)}}ai.options.method=ai.options.method.toUpperCase();if((al=ai.getExistingFallback())&&al.parentNode){al.parentNode.removeChild(al)}if(ai.options.previewsContainer!==false){if(ai.options.previewsContainer){ai.previewsContainer=A.getElement(ai.options.previewsContainer,"previewsContainer")}else{ai.previewsContainer=ai.element}}if(ai.options.clickable){if(ai.options.clickable===true){ai.clickableElements=[ai.element]}else{ai.clickableElements=A.getElements(ai.options.clickable,"clickable")}}ai.init();return ai}_createClass(A,[{key:"getAcceptedFiles",value:function G(){return this.files.filter(function(ah){return ah.accepted}).map(function(ah){return ah})}},{key:"getRejectedFiles",value:function N(){return this.files.filter(function(ah){return !ah.accepted}).map(function(ah){return ah})}},{key:"getFilesWithStatus",value:function L(ah){return this.files.filter(function(ai){return ai.status===ah}).map(function(ai){return ai})}},{key:"getQueuedFiles",value:function M(){return this.getFilesWithStatus(A.QUEUED)}},{key:"getUploadingFiles",value:function O(){return this.getFilesWithStatus(A.UPLOADING)}},{key:"getAddedFiles",value:function I(){return this.getFilesWithStatus(A.ADDED)}},{key:"getActiveFiles",value:function H(){return this.files.filter(function(ah){return ah.status===A.UPLOADING||ah.status===A.QUEUED}).map(function(ah){return ah})}},{key:"init",value:function Q(){var al=this;if(this.element.tagName==="form"){this.element.setAttribute("enctype","multipart/form-data")}if(this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")){this.element.appendChild(A.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>"))}if(this.clickableElements.length){var av=function av(){if(al.hiddenFileInput){al.hiddenFileInput.parentNode.removeChild(al.hiddenFileInput)}al.hiddenFileInput=document.createElement("input");al.hiddenFileInput.setAttribute("type","file");if(al.options.maxFiles===null||al.options.maxFiles>1){al.hiddenFileInput.setAttribute("multiple","multiple")}al.hiddenFileInput.className="dz-hidden-input";if(al.options.acceptedFiles!==null){al.hiddenFileInput.setAttribute("accept",al.options.acceptedFiles)}if(al.options.capture!==null){al.hiddenFileInput.setAttribute("capture",al.options.capture)}al.hiddenFileInput.style.visibility="hidden";al.hiddenFileInput.style.position="absolute";al.hiddenFileInput.style.top="0";al.hiddenFileInput.style.left="0";al.hiddenFileInput.style.height="0";al.hiddenFileInput.style.width="0";document.querySelector(al.options.hiddenInputContainer).appendChild(al.hiddenFileInput);return al.hiddenFileInput.addEventListener("change",function(){var aB=al.hiddenFileInput.files;if(aB.length){for(var ay=aB,ax=true,aw=0,ay=ax?ay:ay[Symbol.iterator]();;){var az;if(ax){if(aw>=ay.length){break}az=ay[aw++]}else{aw=ay.next();if(aw.done){break}az=aw.value}var aA=az;al.addFile(aA)}}al.emit("addedfiles",aB);return av()})};av()}this.URL=window.URL!==null?window.URL:window.webkitURL;for(var aj=this.events,ai=true,ah=0,aj=ai?aj:aj[Symbol.iterator]();;){var ak;if(ai){if(ah>=aj.length){break}ak=aj[ah++]}else{ah=aj.next();if(ah.done){break}ak=ah.value}var at=ak;this.on(at,this.options[at])}this.on("uploadprogress",function(){return al.updateTotalUploadProgress()});this.on("removedfile",function(){return al.updateTotalUploadProgress()});this.on("canceled",function(aw){return al.emit("complete",aw)});this.on("complete",function(aw){if(al.getAddedFiles().length===0&&al.getUploadingFiles().length===0&&al.getQueuedFiles().length===0){return setTimeout(function(){return al.emit("queuecomplete")},0)}});var au=function au(aw){aw.stopPropagation();if(aw.preventDefault){return aw.preventDefault()}else{return aw.returnValue=false}};this.listeners=[{element:this.element,events:{dragstart:function aq(aw){return al.emit("dragstart",aw)},dragenter:function an(aw){au(aw);return al.emit("dragenter",aw)},dragover:function ap(aw){var ax=void 0;try{ax=aw.dataTransfer.effectAllowed}catch(ay){}aw.dataTransfer.dropEffect="move"===ax||"linkMove"===ax?"move":"copy";au(aw);return al.emit("dragover",aw)},dragleave:function ao(aw){return al.emit("dragleave",aw)},drop:function ar(aw){au(aw);return al.drop(aw)},dragend:function am(aw){return al.emit("dragend",aw)}}}];this.clickableElements.forEach(function(ax){return al.listeners.push({element:ax,events:{click:function aw(ay){if(ax!==al.element||ay.target===al.element||A.elementInside(ay.target,al.element.querySelector(".dz-message"))){al.hiddenFileInput.click()}return true}}})});this.enable();return this.options.init.call(this)}},{key:"destroy",value:function x(){this.disable();this.removeAllFiles(true);if(this.hiddenFileInput!=null?this.hiddenFileInput.parentNode:undefined){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null}delete this.element.dropzone;return A.instances.splice(A.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function ad(){var ap=void 0;var ao=0;var an=0;var al=this.getActiveFiles();if(al.length){for(var aj=this.getActiveFiles(),ai=true,ah=0,aj=ai?aj:aj[Symbol.iterator]();;){var ak;if(ai){if(ah>=aj.length){break}ak=aj[ah++]}else{ah=aj.next();if(ah.done){break}ak=ah.value}var am=ak;ao+=am.upload.bytesSent;an+=am.upload.total}ap=100*ao/an}else{ap=100}return this.emit("totaluploadprogress",ap,an,ao)}},{key:"_getParamName",value:function k(ah){if(typeof this.options.paramName==="function"){return this.options.paramName(ah)}else{return""+this.options.paramName+(this.options.uploadMultiple?"["+ah+"]":"")}}},{key:"_renameFile",value:function n(ah){if(typeof this.options.renameFile!=="function"){return ah.name}return this.options.renameFile(ah)}},{key:"getFallbackForm",value:function K(){var ah=void 0,ak=void 0;if(ah=this.getExistingFallback()){return ah}var aj='<div class="dz-fallback">';if(this.options.dictFallbackText){aj+="<p>"+this.options.dictFallbackText+"</p>"}aj+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':undefined)+' /><input type="submit" value="Upload!"></div>';var ai=A.createElement(aj);if(this.element.tagName!=="FORM"){ak=A.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>');ak.appendChild(ai)}else{this.element.setAttribute("enctype","multipart/form-data");this.element.setAttribute("method",this.options.method)}return ak!=null?ak:ai}},{key:"getExistingFallback",value:function J(){var ak=function ak(ar){for(var ao=ar,an=true,am=0,ao=an?ao:ao[Symbol.iterator]();;){var ap;if(an){if(am>=ao.length){break}ap=ao[am++]}else{am=ao.next();if(am.done){break}ap=am.value}var aq=ap;if(/(^| )fallback($| )/.test(aq.className)){return aq}}};var ah=["div","form"];for(var ai=0;ai<ah.length;ai++){var al=ah[ai];var aj;if(aj=ak(this.element.getElementsByTagName(al))){return aj}}}},{key:"setupEventListeners",value:function ab(){return this.listeners.map(function(ah){return function(){var ak=[];for(var ai in ah.events){var aj=ah.events[ai];ak.push(ah.element.addEventListener(ai,aj,false))}return ak}()})}},{key:"removeEventListeners",value:function X(){return this.listeners.map(function(ah){return function(){var ak=[];for(var ai in ah.events){var aj=ah.events[ai];ak.push(ah.element.removeEventListener(ai,aj,false))}return ak}()})}},{key:"disable",value:function y(){var ah=this;this.clickableElements.forEach(function(ai){return ai.classList.remove("dz-clickable")});this.removeEventListeners();this.disabled=true;return this.files.map(function(ai){return ah.cancelUpload(ai)})}},{key:"enable",value:function B(){delete this.disabled;this.clickableElements.forEach(function(ah){return ah.classList.add("dz-clickable")});return this.setupEventListeners()}},{key:"filesize",value:function F(al){var aj=0;var ak="b";if(al>0){var an=["tb","gb","mb","kb","b"];for(var ai=0;ai<an.length;ai++){var am=an[ai];var ah=Math.pow(this.options.filesizeBase,4-ai)/10;if(al>=ah){aj=al/Math.pow(this.options.filesizeBase,4-ai);ak=am;break}}aj=Math.round(10*aj)/10}return"<strong>"+aj+"</strong> "+this.options.dictFileSizeUnits[ak]}},{key:"_updateMaxFilesReachedClass",value:function q(){if(this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit("maxfilesreached",this.files)}return this.element.classList.add("dz-max-files-reached")}else{return this.element.classList.remove("dz-max-files-reached")}}},{key:"drop",value:function z(ah){if(!ah.dataTransfer){return}this.emit("drop",ah);var ai=[];for(var aj=0;aj<ah.dataTransfer.files.length;aj++){ai[aj]=ah.dataTransfer.files[aj]}this.emit("addedfiles",ai);if(ai.length){var ak=ah.dataTransfer.items;if(ak&&ak.length&&ak[0].webkitGetAsEntry!=null){this._addFilesFromItems(ak)}else{this.handleFiles(ai)}}}},{key:"paste",value:function S(ah){if(__guard__(ah!=null?ah.clipboardData:undefined,function(aj){return aj.items})==null){return}this.emit("paste",ah);var ai=ah.clipboardData.items;if(ai.length){return this._addFilesFromItems(ai)}}},{key:"handleFiles",value:function P(am){for(var aj=am,ai=true,ah=0,aj=ai?aj:aj[Symbol.iterator]();;){var ak;if(ai){if(ah>=aj.length){break}ak=aj[ah++]}else{ah=aj.next();if(ah.done){break}ak=ah.value}var al=ak;this.addFile(al)}}},{key:"_addFilesFromItems",value:function b(ai){var ah=this;return function(){var ap=[];for(var al=ai,ak=true,aj=0,al=ak?al:al[Symbol.iterator]();;){var am;if(ak){if(aj>=al.length){break}am=al[aj++]}else{aj=al.next();if(aj.done){break}am=aj.value}var ao=am;var an;if(ao.webkitGetAsEntry!=null&&(an=ao.webkitGetAsEntry())){if(an.isFile){ap.push(ah.addFile(ao.getAsFile()))}else{if(an.isDirectory){ap.push(ah._addFilesFromDirectory(an,an.name))}else{ap.push(undefined)}}}else{if(ao.getAsFile!=null){if(ao.kind==null||ao.kind==="file"){ap.push(ah.addFile(ao.getAsFile()))}else{ap.push(undefined)}}else{ap.push(undefined)}}}return ap}()}},{key:"_addFilesFromDirectory",value:function a(ai,al){var ah=this;var aj=ai.createReader();var ak=function ak(an){return __guardMethod__(console,"log",function(ao){return ao.log(an)})};var am=function am(){return aj.readEntries(function(ar){if(ar.length>0){for(var ap=ar,ao=true,an=0,ap=ao?ap:ap[Symbol.iterator]();;){var aq;if(ao){if(an>=ap.length){break}aq=ap[an++]}else{an=ap.next();if(an.done){break}aq=an.value}var at=aq;if(at.isFile){at.file(function(au){if(ah.options.ignoreHiddenFiles&&au.name.substring(0,1)==="."){return}au.fullPath=al+"/"+au.name;return ah.addFile(au)})}else{if(at.isDirectory){ah._addFilesFromDirectory(at,al+"/"+at.name)}}}am()}return null},ak)};return am()}},{key:"accept",value:function s(ai,ah){if(ai.size>this.options.maxFilesize*1024*1024){return ah(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(ai.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize))}else{if(!A.isValidFile(ai,this.options.acceptedFiles)){return ah(this.options.dictInvalidFileType)}else{if(this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles){ah(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));return this.emit("maxfilesexceeded",ai)}else{return this.options.accept.call(this,ai,ah)}}}}},{key:"addFile",value:function t(ai){var ah=this;ai.upload={uuid:A.uuidv4(),progress:0,total:ai.size,bytesSent:0,filename:this._renameFile(ai),chunked:this.options.chunking&&(this.options.forceChunking||ai.size>this.options.chunkSize),totalChunkCount:Math.ceil(ai.size/this.options.chunkSize)};this.files.push(ai);ai.status=A.ADDED;this.emit("addedfile",ai);this._enqueueThumbnail(ai);return this.accept(ai,function(aj){if(aj){ai.accepted=false;ah._errorProcessing([ai],aj)}else{ai.accepted=true;if(ah.options.autoQueue){ah.enqueueFile(ai)}}return ah._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function D(am){for(var aj=am,ai=true,ah=0,aj=ai?aj:aj[Symbol.iterator]();;){var ak;if(ai){if(ah>=aj.length){break}ak=aj[ah++]}else{ah=aj.next();if(ah.done){break}ak=ah.value}var al=ak;this.enqueueFile(al)}return null}},{key:"enqueueFile",value:function C(ai){var ah=this;if(ai.status===A.ADDED&&ai.accepted===true){ai.status=A.QUEUED;if(this.options.autoProcessQueue){return setTimeout(function(){return ah.processQueue()},0)}}else{throw new Error("This file can't be queued because it has already been processed or was rejected.")}}},{key:"_enqueueThumbnail",value:function e(ai){var ah=this;if(this.options.createImageThumbnails&&ai.type.match(/image.*/)&&ai.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(ai);return setTimeout(function(){return ah._processThumbnailQueue()},0)}}},{key:"_processThumbnailQueue",value:function m(){var ah=this;if(this._processingThumbnail||this._thumbnailQueue.length===0){return}this._processingThumbnail=true;var ai=this._thumbnailQueue.shift();return this.createThumbnail(ai,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,true,function(aj){ah.emit("thumbnail",ai,aj);ah._processingThumbnail=false;return ah._processThumbnailQueue()})}},{key:"removeFile",value:function Y(ah){if(ah.status===A.UPLOADING){this.cancelUpload(ah)}this.files=without(this.files,ah);this.emit("removedfile",ah);if(this.files.length===0){return this.emit("reset")}}},{key:"removeAllFiles",value:function W(al){if(al==null){al=false}for(var aj=this.files.slice(),ai=true,ah=0,aj=ai?aj:aj[Symbol.iterator]();;){var ak;if(ai){if(ah>=aj.length){break}ak=aj[ah++]}else{ah=aj.next();if(ah.done){break}ak=ah.value}var am=ak;if(am.status!==A.UPLOADING||al){this.removeFile(am)}}return null}},{key:"resizeImage",value:function Z(aj,am,ak,al,ai){var ah=this;return this.createThumbnail(aj,am,ak,al,false,function(ao,an){if(an==null){return ai(aj)}else{var aq=ah.options.resizeMimeType;if(aq==null){aq=aj.type}var ap=an.toDataURL(aq,ah.options.resizeQuality);if(aq==="image/jpeg"||aq==="image/jpg"){ap=ExifRestore.restore(aj.dataURL,ap)}return ai(A.dataURItoBlob(ap))}})}},{key:"createThumbnail",value:function v(aj,ao,am,an,al,ai){var ah=this;var ak=new FileReader();ak.onload=function(){aj.dataURL=ak.result;if(aj.type==="image/svg+xml"){if(ai!=null){ai(ak.result)}return}return ah.createThumbnailFromUrl(aj,ao,am,an,al,ai)};return ak.readAsDataURL(aj)}},{key:"createThumbnailFromUrl",value:function w(ak,ap,am,ao,al,ai,aj){var ah=this;var an=document.createElement("img");if(aj){an.crossOrigin=aj}an.onload=function(){var aq=function aq(ar){return ar(1)};if(typeof EXIF!=="undefined"&&EXIF!==null&&al){aq=function aq(ar){return EXIF.getData(an,function(){return ar(EXIF.getTag(this,"Orientation"))})}}return aq(function(au){ak.width=an.width;ak.height=an.height;var av=ah.options.resize.call(ah,ak,ap,am,ao);var ar=document.createElement("canvas");var at=ar.getContext("2d");ar.width=av.trgWidth;ar.height=av.trgHeight;if(au>4){ar.width=av.trgHeight;ar.height=av.trgWidth}switch(au){case 2:at.translate(ar.width,0);at.scale(-1,1);break;case 3:at.translate(ar.width,ar.height);at.rotate(Math.PI);break;case 4:at.translate(0,ar.height);at.scale(1,-1);break;case 5:at.rotate(0.5*Math.PI);at.scale(1,-1);break;case 6:at.rotate(0.5*Math.PI);at.translate(0,-ar.height);break;case 7:at.rotate(0.5*Math.PI);at.translate(ar.width,-ar.height);at.scale(-1,1);break;case 8:at.rotate(-0.5*Math.PI);at.translate(-ar.width,0);break}drawImageIOSFix(at,an,av.srcX!=null?av.srcX:0,av.srcY!=null?av.srcY:0,av.srcWidth,av.srcHeight,av.trgX!=null?av.trgX:0,av.trgY!=null?av.trgY:0,av.trgWidth,av.trgHeight);var aw=ar.toDataURL("image/png");if(ai!=null){return ai(aw,ar)}})};if(ai!=null){an.onerror=ai}return an.src=ak.dataURL}},{key:"processQueue",value:function V(){var ai=this.options.parallelUploads;var aj=this.getUploadingFiles().length;var ah=aj;if(aj>=ai){return}var ak=this.getQueuedFiles();if(!(ak.length>0)){return}if(this.options.uploadMultiple){return this.processFiles(ak.slice(0,ai-aj))}else{while(ah<ai){if(!ak.length){return}this.processFile(ak.shift());ah++}}}},{key:"processFile",value:function T(ah){return this.processFiles([ah])}},{key:"processFiles",value:function U(am){for(var aj=am,ai=true,ah=0,aj=ai?aj:aj[Symbol.iterator]();;){var ak;if(ai){if(ah>=aj.length){break}ak=aj[ah++]}else{ah=aj.next();if(ah.done){break}ak=ah.value}var al=ak;al.processing=true;al.status=A.UPLOADING;this.emit("processing",al)}if(this.options.uploadMultiple){this.emit("processingmultiple",am)}return this.uploadFiles(am)}},{key:"_getFilesWithXhr",value:function j(ai){var ah=void 0;return ah=this.files.filter(function(aj){return aj.xhr===ai}).map(function(aj){return aj})}},{key:"cancelUpload",value:function u(aq){if(aq.status===A.UPLOADING){var at=this._getFilesWithXhr(aq.xhr);for(var am=at,ak=true,ai=0,am=ak?am:am[Symbol.iterator]();;){var ao;if(ak){if(ai>=am.length){break}ao=am[ai++]}else{ai=am.next();if(ai.done){break}ao=ai.value}var ar=ao;ar.status=A.CANCELED}if(typeof aq.xhr!=="undefined"){aq.xhr.abort()}for(var an=at,al=true,aj=0,an=al?an:an[Symbol.iterator]();;){var ap;if(al){if(aj>=an.length){break}ap=an[aj++]}else{aj=an.next();if(aj.done){break}ap=aj.value}var ah=ap;this.emit("canceled",ah)}if(this.options.uploadMultiple){this.emit("canceledmultiple",at)}}else{if(aq.status===A.ADDED||aq.status===A.QUEUED){aq.status=A.CANCELED;this.emit("canceled",aq);if(this.options.uploadMultiple){this.emit("canceledmultiple",[aq])}}}if(this.options.autoProcessQueue){return this.processQueue()}}},{key:"resolveOption",value:function aa(ak){if(typeof ak==="function"){for(var ai=arguments.length,aj=Array(ai>1?ai-1:0),ah=1;ah<ai;ah++){aj[ah-1]=arguments[ah]}return ak.apply(this,aj)}return ak}},{key:"uploadFile",value:function ae(ah){return this.uploadFiles([ah])}},{key:"uploadFiles",value:function af(ai){var ah=this;this._transformFiles(ai,function(aq){if(ai[0].upload.chunked){var al=ai[0];var ap=aq[0];var ao=0;al.upload.chunks=[];var am=function am(){var ar=0;while(al.upload.chunks[ar]!==undefined){ar++}if(ar>=al.upload.totalChunkCount){return}ao++;var av=ar*ah.options.chunkSize;var au=Math.min(av+ah.options.chunkSize,al.size);var at={name:ah._getParamName(0),data:ap.webkitSlice?ap.webkitSlice(av,au):ap.slice(av,au),filename:al.upload.filename,chunkIndex:ar};al.upload.chunks[ar]={file:al,index:ar,dataBlock:at,status:A.UPLOADING,progress:0,retries:0};ah._uploadData(ai,[at])};al.upload.finishedChunkUpload=function(at){var ar=true;at.status=A.SUCCESS;at.dataBlock=null;for(var au=0;au<al.upload.totalChunkCount;au++){if(al.upload.chunks[au]===undefined){return am()}if(al.upload.chunks[au].status!==A.SUCCESS){ar=false}}if(ar){ah.options.chunksUploaded(al,function(){ah._finished(ai,"",null)})}};if(ah.options.parallelChunkUploads){for(var an=0;an<al.upload.totalChunkCount;an++){am()}}else{am()}}else{var ak=[];for(var aj=0;aj<ai.length;aj++){ak[aj]={name:ah._getParamName(aj),data:aq[aj],filename:ai[aj].upload.filename}}ah._uploadData(ai,ak)}})}},{key:"_getChunk",value:function i(ah,aj){for(var ai=0;ai<ah.upload.totalChunkCount;ai++){if(ah.upload.chunks[ai]!==undefined&&ah.upload.chunks[ai].xhr===aj){return ah.upload.chunks[ai]}}}},{key:"_uploadData",value:function r(aw,au){var aq=this;var aH=new XMLHttpRequest();for(var am=aw,ak=true,ai=0,am=ak?am:am[Symbol.iterator]();;){var ao;if(ak){if(ai>=am.length){break}ao=am[ai++]}else{ai=am.next();if(ai.done){break}ao=ai.value}var av=ao;av.xhr=aH}if(aw[0].upload.chunked){aw[0].upload.chunks[au[0].chunkIndex].xhr=aH}var aD=this.resolveOption(this.options.method,aw);var aF=this.resolveOption(this.options.url,aw);aH.open(aD,aF,true);aH.timeout=this.resolveOption(this.options.timeout,aw);aH.withCredentials=!!this.options.withCredentials;aH.onload=function(aI){aq._finishedUploading(aw,aH,aI)};aH.onerror=function(){aq._handleUploadError(aw,aH)};var aE=aH.upload!=null?aH.upload:aH;aE.onprogress=function(aI){return aq._updateFilesUploadProgress(aw,aH,aI)};var az={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){A.extend(az,this.options.headers)}for(var ay in az){var aA=az[ay];if(aA){aH.setRequestHeader(ay,aA)}}var ax=new FormData();if(this.options.params){var ar=this.options.params;if(typeof ar==="function"){ar=ar.call(this,aw,aH,aw[0].upload.chunked?this._getChunk(aw[0],aH):null)}for(var aC in ar){var aG=ar[aC];ax.append(aC,aG)}}for(var an=aw,al=true,aj=0,an=al?an:an[Symbol.iterator]();;){var ap;if(al){if(aj>=an.length){break}ap=an[aj++]}else{aj=an.next();if(aj.done){break}ap=aj.value}var ah=ap;this.emit("sending",ah,aH,ax)}if(this.options.uploadMultiple){this.emit("sendingmultiple",aw,aH,ax)}this._addFormElementData(ax);for(var aB=0;aB<au.length;aB++){var at=au[aB];ax.append(at.name,at.data,at.filename)}this.submitRequest(aH,ax,aw)}},{key:"_transformFiles",value:function o(al,aj){var ai=this;var an=[];var ak=0;var ah=function ah(ao){ai.options.transformFile.call(ai,al[ao],function(ap){an[ao]=ap;if(++ak===al.length){aj(an)}})};for(var am=0;am<al.length;am++){ah(am)}}},{key:"_addFormElementData",value:function c(ap){if(this.element.tagName==="FORM"){for(var al=this.element.querySelectorAll("input, textarea, select, button"),aj=true,ah=0,al=aj?al:al[Symbol.iterator]();;){var an;if(aj){if(ah>=al.length){break}an=al[ah++]}else{ah=al.next();if(ah.done){break}an=ah.value}var aq=an;var ar=aq.getAttribute("name");var at=aq.getAttribute("type");if(at){at=at.toLowerCase()}if(typeof ar==="undefined"||ar===null){continue}if(aq.tagName==="SELECT"&&aq.hasAttribute("multiple")){for(var am=aq.options,ak=true,ai=0,am=ak?am:am[Symbol.iterator]();;){var ao;if(ak){if(ai>=am.length){break}ao=am[ai++]}else{ai=am.next();if(ai.done){break}ao=ai.value}var au=ao;if(au.selected){ap.append(ar,au.value)}}}else{if(!at||at!=="checkbox"&&at!=="radio"||aq.checked){ap.append(ar,aq.value)}}}}}},{key:"_updateFilesUploadProgress",value:function p(aI,aM,aE){var aL=void 0;if(typeof aE!=="undefined"){aL=100*aE.loaded/aE.total;if(aI[0].upload.chunked){var aF=aI[0];var aD=this._getChunk(aF,aM);aD.progress=aL;aD.total=aE.total;aD.bytesSent=aE.loaded;var aH=0,aJ=void 0,aG=void 0;aF.upload.progress=0;aF.upload.total=0;aF.upload.bytesSent=0;for(var aK=0;aK<aF.upload.totalChunkCount;aK++){if(aF.upload.chunks[aK]!==undefined&&aF.upload.chunks[aK].progress!==undefined){aF.upload.progress+=aF.upload.chunks[aK].progress;aF.upload.total+=aF.upload.chunks[aK].total;aF.upload.bytesSent+=aF.upload.chunks[aK].bytesSent}}aF.upload.progress=aF.upload.progress/aF.upload.totalChunkCount}else{for(var au=aI,ap=true,al=0,au=ap?au:au[Symbol.iterator]();;){var ay;if(ap){if(al>=au.length){break}ay=au[al++]}else{al=au.next();if(al.done){break}ay=al.value}var ah=ay;ah.upload.progress=aL;ah.upload.total=aE.total;ah.upload.bytesSent=aE.loaded}}for(var av=aI,aq=true,am=0,av=aq?av:av[Symbol.iterator]();;){var az;if(aq){if(am>=av.length){break}az=av[am++]}else{am=av.next();if(am.done){break}az=am.value}var ai=az;this.emit("uploadprogress",ai,ai.upload.progress,ai.upload.bytesSent)}}else{var aC=true;aL=100;for(var aw=aI,ar=true,an=0,aw=ar?aw:aw[Symbol.iterator]();;){var aA;if(ar){if(an>=aw.length){break}aA=aw[an++]}else{an=aw.next();if(an.done){break}aA=an.value}var aj=aA;if(aj.upload.progress!==100||aj.upload.bytesSent!==aj.upload.total){aC=false}aj.upload.progress=aL;aj.upload.bytesSent=aj.upload.total}if(aC){return}for(var ax=aI,at=true,ao=0,ax=at?ax:ax[Symbol.iterator]();;){var aB;if(at){if(ao>=ax.length){break}aB=ax[ao++]}else{ao=ax.next();if(ao.done){break}aB=ao.value}var ak=aB;this.emit("uploadprogress",ak,aL,ak.upload.bytesSent)}}}},{key:"_finishedUploading",value:function h(aj,al,ah){var ak=void 0;if(aj[0].status===A.CANCELED){return}if(al.readyState!==4){return}if(al.responseType!=="arraybuffer"&&al.responseType!=="blob"){ak=al.responseText;if(al.getResponseHeader("content-type")&&~al.getResponseHeader("content-type").indexOf("application/json")){try{ak=JSON.parse(ak)}catch(ai){ah=ai;ak="Invalid JSON response from server."}}}this._updateFilesUploadProgress(aj);if(!(200<=al.status&&al.status<300)){this._handleUploadError(aj,al,ak)}else{if(aj[0].upload.chunked){aj[0].upload.finishedChunkUpload(this._getChunk(aj[0],al))}else{this._finished(aj,ak,ah)}}}},{key:"_handleUploadError",value:function l(an,ap,ao){if(an[0].status===A.CANCELED){return}if(an[0].upload.chunked&&this.options.retryChunks){var al=this._getChunk(an[0],ap);if(al.retries++<this.options.retryChunksLimit){this._uploadData(an,[al.dataBlock]);return}else{console.warn("Retried this chunk too often. Giving up.")}}for(var aj=an,ai=true,ah=0,aj=ai?aj:aj[Symbol.iterator]();;){var ak;if(ai){if(ah>=aj.length){break}ak=aj[ah++]}else{ah=aj.next();if(ah.done){break}ak=ah.value}var am=ak;this._errorProcessing(an,ao||this.options.dictResponseError.replace("{{statusCode}}",ap.status),ap)}}},{key:"submitRequest",value:function ac(aj,ai,ah){aj.send(ai)}},{key:"_finished",value:function g(an,ao,al){for(var aj=an,ai=true,ah=0,aj=ai?aj:aj[Symbol.iterator]();;){var ak;if(ai){if(ah>=aj.length){break}ak=aj[ah++]}else{ah=aj.next();if(ah.done){break}ak=ah.value}var am=ak;am.status=A.SUCCESS;this.emit("success",am,ao,al);this.emit("complete",am)}if(this.options.uploadMultiple){this.emit("successmultiple",an,ao,al);this.emit("completemultiple",an)}if(this.options.autoProcessQueue){return this.processQueue()}}},{key:"_errorProcessing",value:function f(am,an,ao){for(var aj=am,ai=true,ah=0,aj=ai?aj:aj[Symbol.iterator]();;){var ak;if(ai){if(ah>=aj.length){break}ak=aj[ah++]}else{ah=aj.next();if(ah.done){break}ak=ah.value}var al=ak;al.status=A.ERROR;this.emit("error",al,an,ao);this.emit("complete",al)}if(this.options.uploadMultiple){this.emit("errormultiple",am,an,ao);this.emit("completemultiple",am)}if(this.options.autoProcessQueue){return this.processQueue()}}}],[{key:"uuidv4",value:function ag(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ah){var ai=Math.random()*16|0,aj=ah==="x"?ai:ai&3|8;return aj.toString(16)})}}]);return A}(Emitter);Dropzone.initClass();Dropzone.version="5.4.0";Dropzone.options={};Dropzone.optionsForElement=function(a){if(a.getAttribute("id")){return Dropzone.options[camelize(a.getAttribute("id"))]}else{return undefined}};Dropzone.instances=[];Dropzone.forElement=function(a){if(typeof a==="string"){a=document.querySelector(a)}if((a!=null?a.dropzone:undefined)==null){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.")}return a.dropzone};Dropzone.autoDiscover=true;Dropzone.discover=function(){var b=void 0;if(document.querySelectorAll){b=document.querySelectorAll(".dropzone")}else{b=[];var a=function a(c){return function(){var i=[];for(var f=c,e=true,d=0,f=e?f:f[Symbol.iterator]();;){var g;if(e){if(d>=f.length){break}g=f[d++]}else{d=f.next();if(d.done){break}g=d.value}var h=g;if(/(^| )dropzone($| )/.test(h.className)){i.push(b.push(h))}else{i.push(undefined)}}return i}()};a(document.getElementsByTagName("div"));a(document.getElementsByTagName("form"))}return function(){var h=[];for(var e=b,d=true,c=0,e=d?e:e[Symbol.iterator]();;){var f;if(d){if(c>=e.length){break}f=e[c++]}else{c=e.next();if(c.done){break}f=c.value}var g=f;if(Dropzone.optionsForElement(g)!==false){h.push(new Dropzone(g))}else{h.push(undefined)}}return h}()};Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i];Dropzone.isBrowserSupported=function(){var e=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList" in document.createElement("a"))){e=false}else{for(var c=Dropzone.blacklistedBrowsers,b=true,a=0,c=b?c:c[Symbol.iterator]();;){var d;if(b){if(a>=c.length){break}d=c[a++]}else{a=c.next();if(a.done){break}d=a.value}var f=d;if(f.test(navigator.userAgent)){e=false;continue}}}}else{e=false}return e};Dropzone.dataURItoBlob=function(d){var c=atob(d.split(",")[1]);var h=d.split(",")[0].split(":")[1].split(";")[0];var a=new ArrayBuffer(c.length);var g=new Uint8Array(a);for(var f=0,e=c.length,b=0<=e;b?f<=e:f>=e;b?f++:f--){g[f]=c.charCodeAt(f)}return new Blob([a],{type:h})};var without=function without(a,b){return a.filter(function(c){return c!==b}).map(function(c){return c})};var camelize=function camelize(a){return a.replace(/[\-_](\w)/g,function(b){return b.charAt(1).toUpperCase()})};Dropzone.createElement=function(b){var a=document.createElement("div");a.innerHTML=b;return a.childNodes[0]};Dropzone.elementInside=function(b,a){if(b===a){return true}while(b=b.parentNode){if(b===a){return true}}return false};Dropzone.getElement=function(a,c){var b=void 0;if(typeof a==="string"){b=document.querySelector(a)}else{if(a.nodeType!=null){b=a}}if(b==null){throw new Error("Invalid `"+c+"` option provided. Please provide a CSS selector or a plain HTML element.")}return b};Dropzone.getElements=function(k,l){var i=void 0,j=void 0;if(k instanceof Array){j=[];try{for(var f=k,c=true,a=0,f=c?f:f[Symbol.iterator]();;){if(c){if(a>=f.length){break}i=f[a++]}else{a=f.next();if(a.done){break}i=a.value}j.push(this.getElement(i,l))}}catch(h){j=null}}else{if(typeof k==="string"){j=[];for(var g=document.querySelectorAll(k),d=true,b=0,g=d?g:g[Symbol.iterator]();;){if(d){if(b>=g.length){break}i=g[b++]}else{b=g.next();if(b.done){break}i=b.value}j.push(i)}}else{if(k.nodeType!=null){j=[k]}}}if(j==null||!j.length){throw new Error("Invalid `"+l+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")}return j};Dropzone.confirm=function(b,a,c){if(window.confirm(b)){return a()}else{if(c!=null){return c()}}};Dropzone.isValidFile=function(g,e){if(!e){return true}e=e.split(",");var h=g.type;var f=h.replace(/\/.*$/,"");for(var c=e,b=true,a=0,c=b?c:c[Symbol.iterator]();;){var d;if(b){if(a>=c.length){break}d=c[a++]}else{a=c.next();if(a.done){break}d=a.value}var i=d;i=i.trim();if(i.charAt(0)==="."){if(g.name.toLowerCase().indexOf(i.toLowerCase(),g.name.length-i.length)!==-1){return true}}else{if(/\/\*$/.test(i)){if(f===i.replace(/\/.*$/,"")){return true}}else{if(h===i){return true}}}}return false};if(typeof jQuery!=="undefined"&&jQuery!==null){jQuery.fn.dropzone=function(a){return this.each(function(){return new Dropzone(this,a)})}}if(typeof module!=="undefined"&&module!==null){module.exports=Dropzone}else{window.Dropzone=Dropzone}Dropzone.ADDED="added";Dropzone.QUEUED="queued";Dropzone.ACCEPTED=Dropzone.QUEUED;Dropzone.UPLOADING="uploading";Dropzone.PROCESSING=Dropzone.UPLOADING;Dropzone.CANCELED="canceled";Dropzone.ERROR="error";Dropzone.SUCCESS="success";var detectVerticalSquash=function detectVerticalSquash(h){var i=h.naturalWidth;var g=h.naturalHeight;var c=document.createElement("canvas");c.width=1;c.height=g;var d=c.getContext("2d");d.drawImage(h,0,0);var a=d.getImageData(1,0,1,g),e=a.data;var l=0;var f=g;var j=g;while(j>l){var b=e[(j-1)*4+3];if(b===0){f=j}else{l=j}j=f+l>>1}var k=j/g;if(k===0){return 1}else{return k}};var drawImageIOSFix=function drawImageIOSFix(a,f,i,j,h,g,d,e,c,b){var k=detectVerticalSquash(f);return a.drawImage(f,i,j,h,g,d,e,c,b/k)};var ExifRestore=function(){function d(){_classCallCheck(this,d)}_createClass(d,null,[{key:"initClass",value:function f(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function b(r){var s="";var j=undefined;var k=undefined;var l="";var m=undefined;var n=undefined;var o=undefined;var p="";var q=0;while(true){j=r[q++];k=r[q++];l=r[q++];m=j>>2;n=(j&3)<<4|k>>4;o=(k&15)<<2|l>>6;p=l&63;if(isNaN(k)){o=p=64}else{if(isNaN(l)){p=64}}s=s+this.KEY_STR.charAt(m)+this.KEY_STR.charAt(n)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(p);j=k=l="";m=n=o=p="";if(!(q<r.length)){break}}return s}},{key:"restore",value:function h(k,m){if(!k.match("data:image/jpeg;base64,")){return m}var l=this.decode64(k.replace("data:image/jpeg;base64,",""));var n=this.slice2Segments(l);var j=this.exifManipulation(m,n);return"data:image/jpeg;base64,"+this.encode64(j)}},{key:"exifManipulation",value:function c(m,n){var k=this.getExifArray(n);var l=this.insertExif(m,k);var j=new Uint8Array(l);return j}},{key:"getExifArray",value:function e(k){var j=undefined;var l=0;while(l<k.length){j=k[l];if(j[0]===255&j[1]===225){return j}l++}return[]}},{key:"insertExif",value:function g(p,m){var n=p.replace("data:image/jpeg;base64,","");var l=this.decode64(n);var q=l.indexOf(255,3);var o=l.slice(0,q);var k=l.slice(q);var j=o;j=j.concat(m);j=j.concat(k);return j}},{key:"slice2Segments",value:function i(m){var k=0;var o=[];while(true){var l;if(m[k]===255&m[k+1]===218){break}if(m[k]===255&m[k+1]===216){k+=2}else{l=m[k+2]*256+m[k+3];var j=k+l+2;var n=m.slice(k,j);o.push(n);k=j}if(k>m.length){break}}return o}},{key:"decode64",value:function a(t){var u="";var l=undefined;var m=undefined;var n="";var o=undefined;var p=undefined;var q=undefined;var r="";var s=0;var k=[];var j=/[^A-Za-z0-9\+\/\=]/g;if(j.exec(t)){console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.")}t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(true){o=this.KEY_STR.indexOf(t.charAt(s++));p=this.KEY_STR.indexOf(t.charAt(s++));q=this.KEY_STR.indexOf(t.charAt(s++));r=this.KEY_STR.indexOf(t.charAt(s++));l=o<<2|p>>4;m=(p&15)<<4|q>>2;n=(q&3)<<6|r;k.push(l);if(q!==64){k.push(m)}if(r!==64){k.push(n)}l=m=n="";o=p=q=r="";if(!(s<t.length)){break}}return k}}]);return d}();ExifRestore.initClass();var contentLoaded=function contentLoaded(l,e){var c=false;var k=true;var b=l.document;var j=b.documentElement;var a=b.addEventListener?"addEventListener":"attachEvent";var i=b.addEventListener?"removeEventListener":"detachEvent";var h=b.addEventListener?"":"on";var f=function f(m){if(m.type==="readystatechange"&&b.readyState!=="complete"){return}(m.type==="load"?l:b)[i](h+m.type,f,false);if(!c&&(c=true)){return e.call(l,m.type||m)}};var g=function g(){try{j.doScroll("left")}catch(m){setTimeout(g,50);return}return f("poll")};if(b.readyState!=="complete"){if(b.createEventObject&&j.doScroll){try{k=!l.frameElement}catch(d){}if(k){g()}}b[a](h+"DOMContentLoaded",f,false);b[a](h+"readystatechange",f,false);return l[a](h+"load",f,false)}};Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover){return Dropzone.discover()}};contentLoaded(window,Dropzone._autoDiscoverFunction);function __guard__(b,a){return typeof b!=="undefined"&&b!==null?a(b):undefined}function __guardMethod__(b,a,c){if(typeof b!=="undefined"&&b!==null&&typeof b[a]==="function"){return c(b,a)}else{return undefined}};